<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Iterum</title><meta name="description" content="Iterum is a real time strategy game made by Evergreen IT AB. I worked on this game during my Graduation Project and Internship, then I&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://max-fagerstrom.github.io/iterum.html"><link rel="alternate" type="application/atom+xml" href="https://max-fagerstrom.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://max-fagerstrom.github.io/feed.json"><meta property="og:title" content="Iterum"><meta property="og:site_name" content="Max Fagerström"><meta property="og:description" content="Iterum is a real time strategy game made by Evergreen IT AB. I worked on this game during my Graduation Project and Internship, then I&hellip;"><meta property="og:url" content="https://max-fagerstrom.github.io/iterum.html"><meta property="og:type" content="article"><link rel="preload" href="https://max-fagerstrom.github.io/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://max-fagerstrom.github.io/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://max-fagerstrom.github.io/assets/css/style.css?v=aca50f00328abb7b6ee02461f2cce3be"><link rel="stylesheet" href="https://max-fagerstrom.github.io/assets/css/photoswipe.css?v=366561c4c503c68e3af3389ac4d7fb8e"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://max-fagerstrom.github.io/iterum.html"},"headline":"Iterum","datePublished":"2024-11-26T14:40+01:00","dateModified":"2026-01-21T14:41+01:00","description":"Iterum is a real time strategy game made by Evergreen IT AB. I worked on this game during my Graduation Project and Internship, then I&hellip;","author":{"@type":"Person","name":"Max Fagerström","url":"https://max-fagerstrom.github.io/authors/max-fagerstroem/"},"publisher":{"@type":"Organization","name":"Max Fagerström"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="page-template"><div class="container container--center"><header class="header"><div class="header__logo"><a class="logo" href="https://max-fagerstrom.github.io/">Max Fagerström</a></div><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://max-fagerstrom.github.io/" target="_self">Home</a></li><li><a href="https://max-fagerstrom.github.io/demos.html" target="_self">Demos</a></li><li><span class="is-separator">|</span></li><li><a href="https://max-fagerstrom.github.io/portfolio.html" target="_self">Portfolio</a></li><li><a href="https://github.com/Max-Fagerstrom" target="_blank">GitHub</a></li></ul></nav></header><main class="content page"><article class="post"><header><h1 class="post__title">Iterum</h1></header><div class="post__entry"><p><span style="font-weight: 400;">Iterum is a real time strategy game made by Evergreen IT AB. I worked on this game during my Graduation Project and Internship, then I was employed to work on it full time. The game is implemented using the custom Evergreen game engine, written in C++. My work mostly pertains to graphics programming, using OpenGL and GLSL. But I also do a fair bit of work on general gameplay stuff and bugfixes.</span></p><p><a href="https://store.steampowered.com/app/2069820/Iterum/" target="_blank" rel="noopener noreferrer">Iterum Steam page</a></p><h2> </h2><hr><h2><span style="font-weight: 400;">Ambient Occlusion</span></h2><p>I wrote a blog post about this. <a href="https://iterum.gg/implementing-ssao-in-iterum/" target="_blank" rel="noopener noreferrer">available here</a></p><p>For ambient occlusion, I implemented a screen space approach. With our forward renderer this demanded some creativity, since most material about SSAO online assume a deferred renderer. I modified the render pipeline to render a depth buffer for the whole scene. With this depth buffer I can infer the normals of the scene and calculate a visibility value for each pixel of the screen, and output this value to a buffer.</p><p>Entities with AO enabled will then sample from this buffer and include this visibility factor in their lighting calculations</p><figure class="post__image"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/SSAO-Gif.gif" alt="" width="601" height="511"></figure><hr><h2><span style="font-weight: 400;">Bloom</span></h2><p>While work was underway to implement volcanoes in the game, I got the task to implement bloom and emissive maps to improve the visuals of the lava. </p><p>This was a fun task, and built on the post processing I have worked on earlier. Emissive maps were added to the shaders, and if bloom is enabled, the bright value is written to a new "bright" framebuffer. This buffer is then blurred and used in the post processing shader to produce a glow around bright objects.</p><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="2"><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2026-01-14-105048.png" data-size="1289x892"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2026-01-14-105048-thumbnail.png" alt="" width="768" height="531"></a><figcaption>No bloom</figcaption></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2026-01-14-105105.png" data-size="1288x896"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2026-01-14-105105-thumbnail.png" alt="" width="768" height="534"></a><figcaption>Bloom enabled</figcaption></figure></div></div><p>(Lava assets are testing assets)</p><hr><h2><span style="font-weight: 400;">River mesh generation</span></h2><p>For river mesh generation, we already had a variant that produced meshes that was laid on top of the world map mesh. I improved on this implementation by adding the functionality of replacing a tile in the world mesh with a set of vertices, while also getting access to the vertices surrounding a tile. This allowed me to improve the rivers by sinking them into the ground and connecting them with the world mesh.</p><hr><h2><span style="font-weight: 400;">Animations</span></h2><p>The engine initially had a very simple animation system, that just involved switching out the model for each frame of animation (a lot like Quake). Instead of just implementing skeletal animation here, I opted to iterate on this simple animation system by adding blend support. this basically interpolates the vertices between two models (same character in different poses for example).</p><p>This allows us to animate models with less frames and smoother motion than the previous implementation, and without implementing the complexities of skeletal animation. For a result that is indistinguishable from skeletal animation because of the small size of the models on the map.</p><figure class="post__image"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/Skaermbild-2026-01-19-114504.png" alt="" width="359" height="296" sizes="(min-width: 920px) 703px, (min-width: 700px) calc(82vw - 35px), calc(100vw - 81px)" srcset="https://max-fagerstrom.github.io/media/posts/6/responsive/Skaermbild-2026-01-19-114504-xs.png 300w, https://max-fagerstrom.github.io/media/posts/6/responsive/Skaermbild-2026-01-19-114504-sm.png 480w, https://max-fagerstrom.github.io/media/posts/6/responsive/Skaermbild-2026-01-19-114504-md.png 768w, https://max-fagerstrom.github.io/media/posts/6/responsive/Skaermbild-2026-01-19-114504-lg.png 1024w"></figure><p>The rendering of this is handled by a shader that takes in two sets of vertex attributes. and a float uniform of how much to blend. </p><figure class="post__video"><video loading="lazy" width="300" height="150" controls="controls" data-mce-fragment="1"><source src="media/bird1.mp4" type="video/mp4"></video></figure><p><br>This bird is the first thing I tested animations on. In this video you can see its shadow shows the animation without blending. this is a good visualisation on how we get smooth motion from less frames.</p><p>With the new animation system the bird uses 5 models as frames. With the old implementation it used 55 models to get smooth animation.</p><hr><h2><span style="font-weight: 400;">Post Processing</span></h2><p>I implemented post processing for the game. This enabled us to render the game at any resolution we want internally, and also makes more visual effects I implemented later possible. For the initial implementation the only effects were the dynamic resolution, gamma correction and FXAA (fast approximate anti-aliasing).</p><p>To implement this required setting up a different rendering pipeline to use when post processing is enabled. </p><div class="gallery-wrapper gallery-wrapper--wide"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="2"><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-153740-2.png" data-size="1405x1141"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-153740-2-thumbnail.png" alt="" width="768" height="624"></a><figcaption>No gamma correction</figcaption></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-153727.png" data-size="1524x1247"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-153727-thumbnail.png" alt="" width="768" height="628"></a><figcaption>Gamma correction implemented</figcaption></figure></div></div><hr><h2><span style="font-weight: 400;">Normal Mapping</span></h2><p>I implemented normal mapping in the game. this mostly included setting up uniforms, and implementing the normal calculation in the shader. I worked with artists to produce normal maps for the assets we already had.</p><div class="gallery-wrapper gallery-wrapper--wide"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="2"><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-155723.png" data-size="1345x998"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-155723-thumbnail.png" alt="" width="768" height="570"></a><figcaption>No normals</figcaption></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-153740.png" data-size="1405x1141"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2025-07-17-153740-thumbnail.png" alt="" width="768" height="624"></a><figcaption>Normals implemented</figcaption></figure></div></div><hr><h2><span style="font-weight: 400;">Instancing</span></h2><p><span style="font-weight: 400;">The engine already had instancing implemented, but it had been turned off at some point in the past due to graphical glitches. I rewrote the way entities are collected for rendering, the way buffers are set up, and the way uniforms and arrays are sent to the GPU, and got it all up and running again. During testing, an increase of 15 fps was measured on lower end systems. While implementing this I learned a lot from reading OpenGL documentation and articles on rendering optimization. I have previously implemented instancing, but I think it was fun working on it as part of a larger project.</span></p><hr><h2><span style="font-weight: 400;">Water rendering</span></h2><p><span style="font-weight: 400;">For water rendering I implemented a wave animation close to shore tiles, also i fixed a bug where the water would show up untextured on some GPUs.</span></p><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="3"><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2024-11-07-122653-2.png" data-size="1456x1023"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2024-11-07-122653-2-thumbnail.png" alt="" width="768" height="540"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/345848748-e2ceeb32-57e8-41da-9356-68c7986269c8.png" data-size="1179x822"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/345848748-e2ceeb32-57e8-41da-9356-68c7986269c8-thumbnail.png" alt="" width="768" height="535"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/345848706-6e1bf66c-bc19-4a44-9c28-e3529b9a73fe.png" data-size="1177x791"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/345848706-6e1bf66c-bc19-4a44-9c28-e3529b9a73fe-thumbnail.png" alt="" width="768" height="516"></a><figcaption>Water broken on Nvidia GPU's</figcaption></figure></div></div><p><span style="font-weight: 400;">This was due to the Nvidia shader compiler optimizing out uniforms that it thinks are unused, or do not contribute to the final color value. The waves are implemented by combining noise functions in the fragment shader.</span></p><figure class="post__video"><video loading="lazy" width="300" height="150" controls="controls" data-mce-fragment="1"><source src="media/water1.mp4" type="video/mp4"></video></figure><p><span style="font-weight: 400;">The wave positioning is done by generating a low res texture where each tile is given a pixel, I then rely on texture filtering to get smooth values that I can use to identify shorelines in the shader.</span></p><hr><h2><span style="font-weight: 400;">Terrain rendering</span></h2><p><span style="font-weight: 400;">My work on terrain rendering began during my graduation project, with refinements implemented later during my internship. The game initially had very “blocky” terrain texturing. To make it look better I implemented noise and blending between the different textures on the world mesh, and texture variations. This required changes to data structures sent to the GPU as well as changes in the shaders, adding noise and smooth blending functions.</span></p><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="2"><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6//gallery/initial.png" data-size="612x589"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6//gallery/initial-thumbnail.png" alt="" width="612" height="589"></a><figcaption>Before</figcaption></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6//gallery/final.png" data-size="1143x703"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6//gallery/final-thumbnail.png" alt="" width="768" height="472"></a><figcaption>After</figcaption></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2024-11-26-162659.png" data-size="935x691"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2024-11-26-162659-thumbnail.png" alt="" width="768" height="568"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2024-11-26-162713.png" data-size="767x717"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/Skaermbild-2024-11-26-162713-thumbnail.png" alt="" width="767" height="717"></a></figure></div></div><p><span style="font-weight: 400;">For texture variation I implemented a tilemap based approach and worked with an artist to produce a few different varieties of textures for the different terrain types. Tiles get a random value at generation and in the fragment shader selects a texture variation based on this value.</span></p><figure class="post__image post__image--center"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/lowres_variation.png" alt="" width="899" height="178" sizes="(min-width: 920px) 703px, (min-width: 700px) calc(82vw - 35px), calc(100vw - 81px)" srcset="https://max-fagerstrom.github.io/media/posts/6/responsive/lowres_variation-xs.png 300w, https://max-fagerstrom.github.io/media/posts/6/responsive/lowres_variation-sm.png 480w, https://max-fagerstrom.github.io/media/posts/6/responsive/lowres_variation-md.png 768w, https://max-fagerstrom.github.io/media/posts/6/responsive/lowres_variation-lg.png 1024w"></figure><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="3"><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/variation.png" data-size="871x651"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/variation-thumbnail.png" alt="" width="768" height="574"></a><figcaption>Variations as rendered in world</figcaption></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/6/gallery/noise.png" data-size="934x610"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/6/gallery/noise-thumbnail.png" alt="" width="768" height="502"></a><figcaption>Work in progress texture blending</figcaption></figure></div></div><hr><p> </p></div></article></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p>© 2026 Max Fagerström</p></div></div></footer></div><script defer="defer" src="https://max-fagerstrom.github.io/assets/js/scripts.min.js?v=c2232aa7558e9517946129d2a1b8c770"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://max-fagerstrom.github.io/assets/js/photoswipe.min.js?v=017385b552f7e0d979e2e2fe6f324015"></script><script defer="defer" src="https://max-fagerstrom.github.io/assets/js/photoswipe-ui-default.min.js?v=d067f0883540b1ddda0e2c9ad1b14260"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
   linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
   if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
   item.el=figureEl;items.push(item);}
   return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
   var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
   if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
   nodeIndex++;}
   if(index>=0){openPhotoSwipe(index,clickedGallery);}
   return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
   var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
   var pair=vars[i].split('=');if(pair.length<2){continue;}
   params[pair[0]]=pair[1];}
   if(params.gid){params.gid=parseInt(params.gid,10);}
   return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
   mainClass:'pswp--dark',
   preload: [1,2],
   hideAnimationDuration:200,
   showAnimationDuration:0,
   bgOpacity: 0.7,
   showHideOpacity:true,
   closeOnScroll: true,
   arrowKeys: true,
   closeEl: true,
   captionEl: true,
   fullscreenEl: true,
   zoomEl: true,
   shareEl: true,
   counterEl: true,
   arrowEl: true,
   preloaderEl: true
   };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
   if(isNaN(options.index)){return;}
   if(disableAnimation){options.showAnimationDuration=0;}
   gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
   var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};window.addEventListener('load', function () {initPhotoSwipeFromDOM('.gallery');}, false);</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></body></html>