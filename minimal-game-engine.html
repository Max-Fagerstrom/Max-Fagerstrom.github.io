<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Minimal Game Engine</title><meta name="description" content="Minimal Game Engine is a solo side project i started when we were learning C++, during my time at Futuregames. The course was mainly dealing&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://max-fagerstrom.github.io/minimal-game-engine.html"><link rel="alternate" type="application/atom+xml" href="https://max-fagerstrom.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://max-fagerstrom.github.io/feed.json"><meta property="og:title" content="Minimal Game Engine"><meta property="og:site_name" content="Max Fagerström"><meta property="og:description" content="Minimal Game Engine is a solo side project i started when we were learning C++, during my time at Futuregames. The course was mainly dealing&hellip;"><meta property="og:url" content="https://max-fagerstrom.github.io/minimal-game-engine.html"><meta property="og:type" content="article"><link rel="preload" href="https://max-fagerstrom.github.io/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://max-fagerstrom.github.io/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://max-fagerstrom.github.io/assets/css/style.css?v=aca50f00328abb7b6ee02461f2cce3be"><link rel="stylesheet" href="https://max-fagerstrom.github.io/assets/css/photoswipe.css?v=366561c4c503c68e3af3389ac4d7fb8e"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://max-fagerstrom.github.io/minimal-game-engine.html"},"headline":"Minimal Game Engine","datePublished":"2024-11-17T15:27+01:00","dateModified":"2024-12-07T10:53+01:00","description":"Minimal Game Engine is a solo side project i started when we were learning C++, during my time at Futuregames. The course was mainly dealing&hellip;","author":{"@type":"Person","name":"Max Fagerström","url":"https://max-fagerstrom.github.io/authors/max-fagerstroem/"},"publisher":{"@type":"Organization","name":"Max Fagerström"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="page-template"><div class="container container--center"><header class="header"><div class="header__logo"><a class="logo" href="https://max-fagerstrom.github.io/">Max Fagerström</a></div><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://max-fagerstrom.github.io/" target="_self">Home</a></li><li><a href="https://max-fagerstrom.github.io/demos.html" target="_self">Demos</a></li><li><span class="is-separator">|</span></li><li><a href="https://max-fagerstrom.github.io/portfolio.html" target="_self">Portfolio</a></li><li><a href="https://github.com/Max-Fagerstrom" target="_blank">GitHub</a></li></ul></nav></header><main class="content page"><article class="post"><header><h1 class="post__title">Minimal Game Engine</h1></header><div class="post__entry"><div class="post__toc"><h3>Table of Contents</h3><ul><li><a href="#mcetoc_1ict8s3b7fo">Engine Features</a><ul><li><a href="#mcetoc_1ict8s3b7fp">Optimized Rendering</a></li><li><a href="#mcetoc_1ict8s3b7fq">Program State Handling</a></li><li><a href="#mcetoc_1ict8s3b7fr">2D Rendering</a></li><li><a href="#mcetoc_1ict8s3b7fs">Low Dependency and High portability</a></li></ul></li><li><a href="#mcetoc_1ict8s3b7ft">My goal with this project.</a></li><li><a href="#mcetoc_1ict8s3b7fu">What ive done and learned during this project</a></li><li><a href="#mcetoc_1ict8s3b7fv">Gallery</a></li></ul></div><figure class="post__image post__image--wide"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/5//2023-08-16-23-09-08.gif" alt="" width="1920" height="480"></figure><p><span class="wixui-rich-text__text">Minimal Game Engine is a solo side project i started when we were learning C++, during my time at Futuregames. The course was mainly dealing with C++ in Unreal engine, however the teacher also linked us some material that went over more general C++ using SDL. I followed these tutorials, however using regular C as opposed to C++ as I wanted to learn more low level stuff, and eventually I removed SDL and opted to learn how to deal with OpenGL directly. Minimal Game Engine is what resulted from this learning journey.</span></p><p><a href="https://github.com/Max-Fagerstrom/minimal-game-engine" target="_blank" rel="noopener noreferrer">Check out the source (github)</a></p><hr><h2 id="mcetoc_1ict8s3b7fo">Engine Features</h2><ul><li><h3 id="mcetoc_1ict8s3b7fp" class="font_5 wixui-rich-text__text"><span class="wixui-rich-text__text">Optimized Rendering</span></h3><p class="font_5 wixui-rich-text__text"><span class="wixui-rich-text__text">Using the latest features of OpenGL, all graphical objects are able to be instanced and rendered with different textures and transforms with a single draw call. additionally multiple graphical objects can be batched together in a "RenderQueue" and this and all rendered with a single draw call.</span></p></li><li><h3 id="mcetoc_1ict8s3b7fq" class="font_5 wixui-rich-text__text"><span class="wixui-rich-text__text">Program State Handling</span></h3><p><span class="wixui-rich-text__text">The engine state is controlled by the currently active "Program" this is similar to a "Scene" in Unity. The Program has a initialization, update and destroy functions, and optional functions to handle input. Programs can either put variables in a dynamically allocated struct or have static variables that persist during state changes.</span></p></li><li><h3 id="mcetoc_1ict8s3b7fr" class="font_5 wixui-rich-text__text"><span class="wixui-rich-text__text">2D Rendering</span></h3><p><span class="wixui-rich-text__text">The engine has 2D software rendering functions for blitting and text rendering on 3 canvases, the foreground, background and high res layers. as well as a Apple 2/Serial terminal like text mode that slowly prints text on the high res layer.</span></p></li><li><h3 id="mcetoc_1ict8s3b7fs" class="font_5 wixui-rich-text__text"><span class="wixui-rich-text__text">Low Dependency and High portability</span></h3><p><span class="wixui-rich-text__text">The engine is made with not that many external dependencies, and all that's needed to compile it is included in the GitHub repo. libraries are linked statically as much as possible. Its tested to compile on both windows and Linux. however as there is yet no standard way to do multithreading across platforms in C, a pthread wrapper library is required when compiling on MSVC on windows. Clang and GCC should work out of the box on both platforms.</span></p></li></ul><hr><h2 id="mcetoc_1ict8s3b7ft" class="font_2 wixui-rich-text__text">My goal with this project.</h2><p>The goal of this project has always been learning and fun, implementing systems like these is something I really enjoy doing. I could see myself creating some games or demos with it in the future but for now the main goal is to enjoy coding and having fun making something. What I've also enjoyed is making the most of what you have, and that's why I've opted to use external libraries sparingly, and used C as opposed to the more feature dense C++, figuring out how to do stuff while working with as little as possible has been very fun.</p><h2 id="mcetoc_1ict8s3b7fu" class="font_2 wixui-rich-text__text">What I've done and learned during this project</h2><div id="comp-lmnpdxi41" class="HcOXKn c9GqVL QxJLC3 lq2cno comp-lmnpdxi41 wixui-rich-text" data-testid="richTextElement"><p class="font_7 wixui-rich-text__text">The project contains many features I just implemented because I think its cool, the indexed and instanced rendering I introduced because I find it very fun to optimize stuff and was amazed with the options OpenGL gives you, learning how to store stuff in VRAM was very fun. All the vector and matrix math I implemented manually despite there existing numerous libraries for this, but I had more fun implementing them myself.</p><p>While working on Shutterseeker, I worked a lot with manipulating pixel arrays, I found this fun so used this knowledge when implementing the 2D system in this engine, the 3 canvases are just stored as an array of colours and sent to the gpu as a texture to render. This is not very optimal as u then have to do blitting and movement of pixels on the CPU side, a task more suited towards GPUs. In this system I also implemented a text mode inspired by old computers and terminals, just because I think it looks neat.</p><p>I've implemented some test functions in this engine, the first one I implemented was a basic particle system, I modified this code later to test the instancing system. the other big testing function I introduced was a boid scene, I used this function to test and learn about both the program/scene handling as well as how to implement multithreading.</p><hr><div id="comp-lmnq065b" class="HcOXKn c9GqVL QxJLC3 lq2cno comp-lmnq065b wixui-rich-text" data-testid="richTextElement"><h2 id="mcetoc_1ict8s3b7fv" class="font_0 wixui-rich-text__text"><span class="wixui-rich-text__text">Gallery</span></h2></div><div id="comp-lmnq065e2" class="HcOXKn c9GqVL QxJLC3 lq2cno comp-lmnq065e2 wixui-rich-text" data-testid="richTextElement"><p class="font_8 wixui-rich-text__text">H<span class="wixui-rich-text__text">ere are some screenshots I've taken during development, they are not very graphically impressive. But I've always aimed for a kind of retro style with this engine.</span></p></div><div class="gallery-wrapper"><div class="gallery" data-is-empty="false" data-translation="Add images" data-columns="3"><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/5/gallery/cube.png" data-size="1106x879"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/5/gallery/cube-thumbnail.png" alt="First 3d test" width="768" height="610"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/5/gallery/image2.png" data-size="1167x899"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/5/gallery/image2-thumbnail.png" alt="2d text and background test" width="768" height="592"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/5/gallery/image5.png" data-size="1366x768"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/5/gallery/image5-thumbnail.png" alt="Rendering generated scenes" width="768" height="432"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/5/gallery/raycast.png" data-size="1026x807"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/5/gallery/raycast-thumbnail.png" alt="Wolfenstein style raycaster" width="768" height="604"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/5/gallery/shading.png" data-size="487x403"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/5/gallery/shading-thumbnail.png" alt="Simple shading test" width="487" height="403"></a></figure><figure class="gallery__item"><a href="https://max-fagerstrom.github.io/media/posts/5/gallery/Screenshot-from-2023-06-18-00-28-26.png" data-size="1198x922"><img loading="lazy" src="https://max-fagerstrom.github.io/media/posts/5/gallery/Screenshot-from-2023-06-18-00-28-26-thumbnail.png" alt="Particle system" width="768" height="591"></a></figure></div></div></div></div></article></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p>© 2024 Max Fagerström</p></div></div></footer></div><script defer="defer" src="https://max-fagerstrom.github.io/assets/js/scripts.min.js?v=c2232aa7558e9517946129d2a1b8c770"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://max-fagerstrom.github.io/assets/js/photoswipe.min.js?v=017385b552f7e0d979e2e2fe6f324015"></script><script defer="defer" src="https://max-fagerstrom.github.io/assets/js/photoswipe-ui-default.min.js?v=d067f0883540b1ddda0e2c9ad1b14260"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
   linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
   if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
   item.el=figureEl;items.push(item);}
   return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
   var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
   if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
   nodeIndex++;}
   if(index>=0){openPhotoSwipe(index,clickedGallery);}
   return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
   var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
   var pair=vars[i].split('=');if(pair.length<2){continue;}
   params[pair[0]]=pair[1];}
   if(params.gid){params.gid=parseInt(params.gid,10);}
   return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
   mainClass:'pswp--dark',
   preload: [1,2],
   hideAnimationDuration:200,
   showAnimationDuration:0,
   bgOpacity: 0.7,
   showHideOpacity:true,
   closeOnScroll: true,
   arrowKeys: true,
   closeEl: true,
   captionEl: true,
   fullscreenEl: true,
   zoomEl: true,
   shareEl: true,
   counterEl: true,
   arrowEl: true,
   preloaderEl: true
   };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
   if(isNaN(options.index)){return;}
   if(disableAnimation){options.showAnimationDuration=0;}
   gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
   var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};window.addEventListener('load', function () {initPhotoSwipeFromDOM('.gallery');}, false);</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></body></html>